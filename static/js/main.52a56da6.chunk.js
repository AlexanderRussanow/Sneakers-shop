(this["webpackJsonpsneakers-shop"]=this["webpackJsonpsneakers-shop"]||[]).push([[0],{39:function(e,t,c){},66:function(e,t,c){"use strict";c.r(t);var r=c(0),n=c.n(r),a=c(32),s=c.n(a),i=(c(39),c(10)),d=c(17),o=c(7),l=c.n(o),j=c(13),u=c(4),b=c(12),h=function(){var e=n.a.useContext(S).itemsInCard,t=e.reduce((function(e,t){return Number(t.price)+Number(e)}),0);return{itemsInCard:e,totalPrice:t}},f=c(1),x=function(e){var t=e.onClick,c=h().totalPrice;return Object(f.jsxs)("header",{className:"d-flex justify-between align-center p-40",children:[Object(f.jsx)(b.b,{to:"/",children:Object(f.jsxs)("div",{className:"d-flex align-center",children:[Object(f.jsx)("img",{width:180,height:150,src:"/img/logo.png",alt:""}),Object(f.jsxs)("div",{children:[Object(f.jsx)("h3",{className:"text-uppercase",children:"Sneakers Eshop"}),Object(f.jsx)("p",{className:"opacity-5",children:"only best sneakers"})]})]})}),Object(f.jsxs)("ul",{className:"d-flex",children:[Object(f.jsxs)("li",{onClick:t,className:"mr-30 cu-p",children:[Object(f.jsx)("img",{width:18,height:18,src:"/img/basket.png",alt:""}),Object(f.jsxs)("span",{children:[c," K\u010d"]})]}),Object(f.jsx)("li",{children:Object(f.jsx)(b.b,{to:"/favorites",children:Object(f.jsx)("img",{className:"mr-30 cu-p",width:18,height:18,src:"/img/heart-unlike.png",alt:""})})}),Object(f.jsx)("li",{children:Object(f.jsx)(b.b,{to:"/orders",children:Object(f.jsx)("img",{width:18,height:18,src:"/img/user1.png",alt:""})})})]})]})},m=function(e){var t=e.image,c=e.title,r=e.description,a=n.a.useContext(S).setOpenCart;return Object(f.jsxs)("div",{className:"cardEmpty d-flex align-center justify-center flex-column flex",children:[Object(f.jsx)("img",{className:"mb-20",width:120,height:120,src:t}),Object(f.jsx)("h2",{children:c}),Object(f.jsx)("p",{children:r}),Object(f.jsx)(b.b,{to:"/",exact:!0,children:Object(f.jsx)("button",{onClick:function(){return a(!1)},className:"greenButton",children:"Back to the home screen!"})})]})},O=c(5),p=c.n(O),g=function(e){return new Promise((function(t){return setTimeout(t,e)}))},v=function(e){var t=e.openCard,c=e.itemsInCard,a=e.removeFromCard,s=Object(r.useState)(!1),i=Object(u.a)(s,2),d=i[0],o=i[1],b=n.a.useContext(S).setItemsInCard,x=Object(r.useState)(null),O=Object(u.a)(x,2),v=O[0],k=O[1],N=Object(r.useState)(!1),w=Object(u.a)(N,2),C=w[0],y=w[1],I=h().totalPrice,T=function(){var e=Object(j.a)(l.a.mark((function e(){var t,r,n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y(!0),e.next=4,p.a.post("https://60f035ecf587af00179d3dc9.mockapi.io/orders",{items:c});case 4:t=e.sent,r=t.data,k(r.id),o(!0),b([]),n=0;case 10:if(!(n<c.length)){e.next=19;break}return a=c[n],e.next=14,p.a.delete("https://60f035ecf587af00179d3dc9.mockapi.io/card/"+a.id);case 14:return e.next=16,g(1e3);case 16:n++,e.next=10;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(0),alert("Some error");case 24:y(!1);case 25:case"end":return e.stop()}}),e,null,[[0,21]])})));return function(){return e.apply(this,arguments)}}();return Object(f.jsx)("div",{className:"overlay",children:Object(f.jsxs)("div",{className:"drawer",children:[Object(f.jsxs)("h2",{className:"mb-30 d-flex justify-between",children:["Cart"," ",Object(f.jsx)("img",{onClick:t,className:"removeItem cu-p",height:30,width:30,src:"/img/remove.png",alt:""})]}),c.length>0?Object(f.jsxs)("div",{className:"d-flex flex-column flex",style:{overflow:"scroll"},children:[Object(f.jsx)("div",{className:"items flex",children:c.map((function(e){return Object(f.jsxs)("div",{className:"cartItem d-flex align-center mb-20",children:[Object(f.jsx)("div",{style:{backgroundImage:"url(".concat(e.img,")")},className:"cartItemImg"}),Object(f.jsxs)("div",{className:"mr-20 flex",children:[Object(f.jsx)("p",{className:"mb-5",children:e.title}),Object(f.jsx)("b",{children:e.price})]}),Object(f.jsx)("img",{onClick:function(){return a(e.id)},className:"removeItem",height:30,width:30,src:"/img/remove.png",alt:""})]},e.id)}))}),Object(f.jsxs)("div",{className:"cartTotalBlock",children:[Object(f.jsxs)("ul",{children:[Object(f.jsxs)("li",{children:[Object(f.jsx)("span",{children:"Total: "}),Object(f.jsx)("div",{}),Object(f.jsxs)("b",{children:[I," K\u010d"]})]}),Object(f.jsxs)("li",{children:[Object(f.jsx)("span",{children:"`Tax (21%): `"}),Object(f.jsx)("div",{}),Object(f.jsxs)("b",{children:[Math.round(I/100*21)," K\u010d"]})]})]}),Object(f.jsx)("button",{disabled:C,onClick:T,className:"greenButton",children:"Place order"})]})]}):Object(f.jsx)(m,{image:d?"/img/happy.png":"/img/sad.png",title:d?"Thank you!":"Card is empty",description:d?"Yo will recieve your order \u2116".concat(v," soon"):"Don't hesitate and add something to your card!"})]})})},k=c(2),N=c(34),w=function(){return Object(f.jsxs)(N.a,{speed:2,width:160,height:265,viewBox:"0 0 150 265",backgroundColor:"#f3f3f3",foregroundColor:"#ecebeb",children:[Object(f.jsx)("circle",{cx:"31",cy:"31",r:"15"}),Object(f.jsx)("rect",{x:"0",y:"0",rx:"10",ry:"10",width:"160",height:"155"}),Object(f.jsx)("rect",{x:"0",y:"167",rx:"5",ry:"5",width:"160",height:"15"}),Object(f.jsx)("rect",{x:"0",y:"187",rx:"5",ry:"5",width:"100",height:"15"}),Object(f.jsx)("rect",{x:"1",y:"234",rx:"5",ry:"5",width:"80",height:"25"}),Object(f.jsx)("rect",{x:"124",y:"220",rx:"10",ry:"10",width:"32",height:"32"})]})},C=function(e){var t=e.id,c=e.title,a=e.price,s=e.img,i=e.addToCard,d=e.addToFavList,o=e.favorited,l=void 0!==o&&o,j=e.loading,b=void 0!==j&&j,h=n.a.useContext(S).isItemAdded,x=Object(r.useState)(l),m=Object(u.a)(x,2),O=m[0],p=m[1],g={id:t,parentId:t,title:c,img:s,price:a};return Object(f.jsx)("div",{className:"card",children:b?Object(f.jsx)(w,{}):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("div",{className:"favorite",children:d&&Object(f.jsx)("img",{onClick:function(){d(g),p(!O)},height:15,width:15,src:O?"/img/heart-like.png":"/img/heart-unlike.png"})}),Object(f.jsx)("img",{width:"100%",height:"160",src:s}),Object(f.jsx)("h5",{children:c}),Object(f.jsxs)("div",{className:"d-flex justify-between align-center",children:[Object(f.jsxs)("div",{className:"d-flex flex-column ",children:[Object(f.jsx)("span",{children:"Price: "}),Object(f.jsxs)("b",{children:[a," K\u010d"]})]}),i&&Object(f.jsx)("img",{className:"plus",onClick:function(){i(g)},width:20,height:20,src:h(t)?"/img/green-btn.png":"/img/plus.png"})]})]})})},y=function(e){var t=e.sneakers,c=e.searchLine,r=e.setSearchLine,n=e.onAddToCard,a=e.addToFavList,s=e.isLoading;return Object(f.jsxs)("div",{className:"content p-40",children:[Object(f.jsxs)("div",{className:"d-flex align-center mb-40 justify-between",children:[Object(f.jsx)("h2",{children:c?"Searching: ".concat(c,"..."):"All sneakers"}),Object(f.jsxs)("div",{className:"search-block d-flex align-center",children:[Object(f.jsx)("img",{height:33,width:33,src:"/img/search.png",alt:"Search"}),Object(f.jsx)("input",{value:c,onChange:function(e){return r(e.currentTarget.value)},placeholder:"Search...",type:"search"})]})]}),Object(f.jsx)("div",{className:"d-flex flex-wrap",children:function(){var e=t.filter((function(e){return e.title.toLowerCase().includes(c.toLowerCase())}));return(s?Object(d.a)(Array(10)):e).map((function(e,t){return Object(f.jsx)(C,Object(i.a)(Object(i.a)({},e),{},{addToCard:function(e){return n(e)},addToFavList:function(e){return a(e)},loading:s}),t)}))}()})]})},I=function(e){var t=e.onAddToCard,c=e.addToFavList,r=n.a.useContext(S).favList;return Object(f.jsxs)("div",{className:"content p-40",children:[Object(f.jsx)("div",{className:"d-flex align-center mb-40 justify-between",children:Object(f.jsx)("h2",{children:"My favorites sneakers"})}),Object(f.jsx)("div",{className:"d-flex flex-wrap",children:r.length>0?r.map((function(e){return Object(f.jsx)(C,Object(i.a)(Object(i.a)({},e),{},{favorited:!0,addToCard:function(e){return t(e)},addToFavList:function(e){return c(e)}}),e.id)})):Object(f.jsx)(m,{image:"/img/sad.png",title:"Your favorite list is empty!",description:"Don't hesitate and add something for your next purchase here!"})})]})},T=function(){var e=Object(r.useState)([]),t=Object(u.a)(e,2),c=t[0],n=t[1],a=Object(r.useState)(!0),s=Object(u.a)(a,2),d=s[0],o=s[1];return Object(r.useEffect)((function(){try{Object(j.a)(l.a.mark((function e(){var t,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("https://60f035ecf587af00179d3dc9.mockapi.io/orders");case 2:t=e.sent,c=t.data,n(c.map((function(e){return e.items})).flat()),o(!1);case 6:case"end":return e.stop()}}),e)})))()}catch(e){alert("Error in Orders data fetching")}}),[]),Object(f.jsxs)("div",{className:"content p-40",children:[Object(f.jsx)("div",{className:"d-flex align-center mb-40 justify-between",children:Object(f.jsx)("h2",{children:"My orders"})}),Object(f.jsx)("div",{className:"d-flex flex-wrap",children:c.length>0?c.map((function(e,t){return Object(f.jsx)(C,Object(i.a)(Object(i.a)({},e),{},{loading:d}),t)})):Object(f.jsx)(m,{image:"/img/sad.png",title:"You have no orders yet",description:"Make an order if you need new cool sneakers"})})]})},S=n.a.createContext({});var L=function(){var e=Object(r.useState)([]),t=Object(u.a)(e,2),c=t[0],a=t[1],s=Object(r.useState)([]),o=Object(u.a)(s,2),b=o[0],h=o[1],m=Object(r.useState)([]),O=Object(u.a)(m,2),g=O[0],N=O[1],w=n.a.useState(!1),C=Object(u.a)(w,2),L=C[0],F=C[1],A=Object(r.useState)(""),E=Object(u.a)(A,2),P=E[0],B=E[1],M=Object(r.useState)(!0),K=Object(u.a)(M,2),D=K[0],Y=K[1];Object(r.useEffect)((function(){function e(){return(e=Object(j.a)(l.a.mark((function e(){var t,c,r,n,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.all([p.a.get("https://60f035ecf587af00179d3dc9.mockapi.io/card"),p.a.get("https://60f035ecf587af00179d3dc9.mockapi.io/favorite"),p.a.get("https://60f035ecf587af00179d3dc9.mockapi.io/sneakers")]);case 3:t=e.sent,c=Object(u.a)(t,3),r=c[0],n=c[1],s=c[2],Y(!1),a(s.data),h(r.data),N(n.data),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),alert("Error in useEffect in Data fetching");case 17:case"end":return e.stop()}}),e,null,[[0,14]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var J=function(){var e=Object(j.a)(l.a.mark((function e(t){var c,r,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(c=g.find((function(e){return Number(e.id)===Number(t.id)})))){e.next=7;break}p.a.delete("https://60f035ecf587af00179d3dc9.mockapi.io/favorite/".concat(c.id)),N((function(e){return e.filter((function(e){return Number(e.id)!==Number(t.id)}))})),e.next=12;break;case 7:return e.next=9,p.a.post("https://60f035ecf587af00179d3dc9.mockapi.io/favorite",t);case 9:r=e.sent,n=r.data,N((function(e){return[].concat(Object(d.a)(e),[n])}));case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),alert("Some problems with favorite list");case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=Object(j.a)(l.a.mark((function e(t){var c,r,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(c=b.find((function(e){return Number(e.parentId)===Number(t.id)})))){e.next=8;break}return e.next=5,p.a.delete("https://60f035ecf587af00179d3dc9.mockapi.io/card/".concat(c.id));case 5:h((function(e){return e.filter((function(e){return Number(e.parentId)!==Number(t.id)}))})),e.next=14;break;case 8:return h((function(e){return[].concat(Object(d.a)(e),[t])})),e.next=11,p.a.post("https://60f035ecf587af00179d3dc9.mockapi.io/card",t);case 11:r=e.sent,n=r.data,h((function(e){return e.map((function(e){return e.parentId===n.parentId?Object(i.a)(Object(i.a)({},e),{},{id:n.id}):e}))}));case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),alert("Error with adding items in a Cart");case 19:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsx)(S.Provider,{value:{sneakers:c,itemsInCard:b,favList:g,isItemAdded:function(e){return b.some((function(t){return Number(t.parentId)===Number(e)}))},setOpenCart:F,setItemsInCard:h,onAddToCard:q,addToFavList:J,isLoading:D},children:Object(f.jsxs)("div",{className:"wrapper clear",children:[L?Object(f.jsx)(v,{openCard:function(){return F(!L)},itemsInCard:b,removeFromCard:function(e){p.a.delete("https://60f035ecf587af00179d3dc9.mockapi.io/card/".concat(e)),h((function(t){return t.filter((function(t){return Number(t.id)!==Number(e)}))}))}}):null,Object(f.jsx)(x,{onClick:function(){return F(!L)}}),Object(f.jsx)(k.a,{path:"/favorites",exact:!0,children:Object(f.jsx)(I,{onAddToCard:q,addToFavList:J})}),Object(f.jsx)(k.a,{path:"/",exact:!0,children:Object(f.jsx)(y,{itemsInCard:b,sneakers:c,searchLine:P,setSearchLine:B,onAddToCard:q,addToFavList:J,isLoading:D})}),Object(f.jsx)(k.a,{path:"/orders",children:Object(f.jsx)(T,{})})]})})};c(65);s.a.render(Object(f.jsx)(n.a.StrictMode,{children:Object(f.jsx)(b.a,{children:Object(f.jsx)(L,{})})}),document.getElementById("root"))}},[[66,1,2]]]);
//# sourceMappingURL=main.52a56da6.chunk.js.map